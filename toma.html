<!DOCTYPE html>
<html>

<head>
  <!-- Basic -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <!-- Mobile Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <!-- Site Metas -->
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="author" content="" />

  <title>BIOLOGIA MOLECULAR</title>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <!-- slider stylesheet -->
  <link rel="stylesheet" type="text/css"
    href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.1.3/assets/owl.carousel.min.css" />

  <!-- bootstrap core css -->
  <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />

  <!-- fonts style -->
  <link href="https://fonts.googleapis.com/css?family=Dosis:400,500|Poppins:400,700&display=swap" rel="stylesheet">
  <!-- Custom styles for this template -->
  <link href="css/style.css" rel="stylesheet" />
  <!-- responsive style -->
  <link href="css/responsive.css" rel="stylesheet" />

  <style>
    /* Estilos mejorados para formularios */
    /* --- Mejoras del Modal --- */
.modal-content {
    border: none;
    border-radius: 15px;
    box-shadow: 0 15px 50px rgba(0,0,0,0.3);
    overflow: visible; /* Permite que los selects no se corten */
}

.modal-header {
    border: none;
    border-radius: 15px 15px 0 0;
    padding: 25px;
    color: white;
}

.modal-header.adn {
    background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
}

.modal-header.arn {
    background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
}

.modal-body {
    padding: 30px;
    background: #ffffff;
    /* IMPORTANTE: Cambiado de auto a visible para evitar el error de la imagen */
    overflow-y: visible; 
    max-height: none; 
}

/* --- Estilos de Formulario --- */
.form-group {
    margin-bottom: 20px;
    position: relative;
    overflow: visible !important; /* Asegura que el dropdown sea visible */
}

.form-group label {
    font-weight: 600;
    font-size: 13px;
    color: #444;
    margin-bottom: 8px;
    display: block;
}

.form-control {
    height: auto;
    border: 2px solid #edf2f7;
    border-radius: 10px;
    padding: 12px 15px;
    font-size: 14px;
    transition: all 0.3s ease;
    background-color: #f8fafc;
}

.form-control:focus {
    border-color: #3498db;
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
    background-color: #fff;
    outline: none;
}

/* --- Solución para el Dropdown (Select) --- */
select.form-control {
    cursor: pointer;
    appearance: none; /* Elimina la flecha nativa */
    -webkit-appearance: none;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%233498db' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 1rem center;
    background-size: 16px 12px;
    padding-right: 40px;
    z-index: 10;
}

/* --- Títulos de Sección dentro del Formulario --- */
h6 {
    text-transform: uppercase;
    letter-spacing: 1px;
    font-size: 12px;
    margin-top: 10px;
}

/* --- Botones --- */
.btn-submit {
    width: 100%;
    padding: 15px;
    font-weight: 700;
    font-size: 15px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    text-transform: uppercase;
    margin-top: 15px;
}

.btn-submit.adn {
    background: linear-gradient(135deg, #3498db 0%, #21d7ff 100%);
    color: white;
    box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
}

.btn-submit.arn {
    background: linear-gradient(135deg, #e74c3c 0%, #ff7675 100%);
    color: white;
    box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
}

.btn-submit:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}

/* --- Estilos de Tablas --- */
.table-responsive {
    border-radius: 10px;
    overflow: hidden;
}

.table thead th {
    border: none;
    padding: 15px;
    text-transform: uppercase;
    font-size: 11px;
    letter-spacing: 0.5px;
}

.table tbody td {
    padding: 15px;
    vertical-align: middle;
    border-top: 1px solid #f1f4f8;
}

.badge {
    padding: 6px 12px;
    border-radius: 20px;
    font-weight: 500;
}

/* --- Animaciones Suaves --- */
.modal.fade .modal-dialog {
    transform: scale(0.9);
    transition: transform 0.3s ease-out;
}

.modal.show .modal-dialog {
    transform: scale(1);
}
  </style>
</head>

<body>
  <div class="hero_area">
    <!-- header section strats -->
    <header class="header_section">
      <div class="container-fluid">
        <nav class="navbar navbar-expand-lg custom_nav-container ">
          <a class="navbar-brand" href="index.html">
            <img src="images/LOGO_U.png" alt="">
            <span>
             Universidad Metropolitana 
            </span>
          </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <div class="d-flex mx-auto flex-column flex-lg-row align-items-center">
              <ul class="navbar-nav  ">
                <li class="nav-item active">
                  <a class="nav-link" href="index.html">Inicio <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="toma.html">Manual de Procedimientos</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="manual.html"> Progreso</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="mocap.html">MOCAP</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="contactos.html">Contacto</a>
                </li>
               
              </ul>
            
            </div>
           
          </div>
        </nav>
      </div>
    </header>

    <div class="container mt-4">
<div class="container" style="margin-top:80px;">

    <h3 style="color: #2c3e50; border-bottom: 3px solid #21d7ff; padding-bottom: 10px;"><i class="fa fa-flask"></i> <b>UNIDAD DE ANÁLISIS DE ÁCIDOS NUCLEICOS (ADN & ARN)</b></h3>
    <p style="color: #555; font-size: 14px; line-height: 1.6;">
        <i class="fa fa-info-circle" style="color: #3498db;"></i> <b>Instrucciones:</b> Ingrese los datos del paciente, tipo de muestra (sangre, tejido o saliva) y la fecha de recolección según el protocolo de extracción solicitado.
    </p>

    <!-- CARD ADN -->
    <div style="background: linear-gradient(135deg, rgba(52,152,219,0.1) 0%, rgba(52,152,219,0.05) 100%); border-left: 4px solid #3498db; border-radius: 10px; padding: 20px; box-shadow: 0px 2px 15px rgba(52,152,219,0.1); margin-top: 20px;">
        <div class="row align-items-center">
            <!-- IMAGEN -->
            <div class="col-md-2 text-center">
                <i class="fa fa-flask" style="font-size: 50px; color: #3498db;"></i>
            </div>

            <!-- INFO -->
            <div class="col-md-5">
                <h4 style="color: #3498db; margin: 0;"><b>Muestras de ADN</b></h4>
                <small style="color: #7f8c8d;">Ácido Desoxirribonucleico | Información genética</small>
                <p style="color: #555; font-size: 13px; margin-top: 5px;">Extracción de ADN genómico de células nucleadas</p>
            </div>

            <!-- ESTADÍSTICAS -->
            <div class="col-md-5 text-center">
                <div style="background: white; border-radius: 8px; padding: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                    <p style="margin: 0; color: #7f8c8d; font-size: 12px;">TOTAL REGISTRADO</p>
                    <h3 style="margin: 10px 0 15px 0; color: #3498db; font-weight: bold;" id="contadorADN">0</h3>
                    <button class="btn" style="background: #3498db; color: white; width: 100%; border: none; border-radius: 6px; padding: 8px; cursor: pointer; font-weight: bold;" data-toggle="modal" data-target="#modalADN"><i class="fa fa-plus"></i> Agregar Muestra</button>
                </div>
            </div>
        </div>
    </div>

    <!-- CARD ARN -->
    <div style="background: linear-gradient(135deg, rgba(231,76,60,0.1) 0%, rgba(231,76,60,0.05) 100%); border-left: 4px solid #e74c3c; border-radius: 10px; padding: 20px; box-shadow: 0px 2px 15px rgba(231,76,60,0.1); margin-top: 20px;">
        <div class="row align-items-center">
            <!-- IMAGEN -->
            <div class="col-md-2 text-center">
                <i class="fa fa-flask" style="font-size: 50px; color: #e74c3c;"></i>
            </div>

            <!-- INFO -->
            <div class="col-md-5">
                <h4 style="color: #e74c3c; margin: 0;"><b>Muestras de ARN</b></h4>
                <small style="color: #7f8c8d;">Ácido Ribonucleico | Material genético transitorio</small>
                <p style="color: #555; font-size: 13px; margin-top: 5px;">Extracción de ARN mensajero y ribosomal</p>
            </div>

            <!-- ESTADÍSTICAS -->
            <div class="col-md-5 text-center">
                <div style="background: white; border-radius: 8px; padding: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                    <p style="margin: 0; color: #7f8c8d; font-size: 12px;">TOTAL REGISTRADO</p>
                    <h3 style="margin: 10px 0 15px 0; color: #e74c3c; font-weight: bold;" id="contadorARN">0</h3>
                    <button class="btn" style="background: #e74c3c; color: white; width: 100%; border: none; border-radius: 6px; padding: 8px; cursor: pointer; font-weight: bold;" data-toggle="modal" data-target="#modalARN"><i class="fa fa-plus"></i> Agregar Muestra</button>
                </div>
            </div>
        </div>
    </div>

    <div class="text-center mt-4">
        <a href="manual.html" class="btn" style="background: #27AE60; color: white; padding: 12px 30px; border-radius: 8px; text-decoration: none; font-weight: bold;"><i class="fa fa-arrow-right"></i> Ver Proceso en Tiempo Real →</a>
    </div>
</div>


    <!-- TABLAS DE REGISTROS -->
    <div style="margin-top: 40px;">

        <!-- TABLA ADN COMPLETA -->
        <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 15px rgba(52,152,219,0.1); margin-bottom: 30px;">
            <h4 style="color: #3498db; border-bottom: 2px solid #3498db; padding-bottom: 10px; margin-bottom: 15px;"><i class="fa fa-flask"></i> Registros de ADN</h4>
            <div class="table-responsive">
                <table class="table table-sm table-hover" style="margin-top: 15px;">
                    <thead style="background: #3498db; color: white; font-size: 12px;">
                        <tr>
                            <th><i class="fa fa-user"></i> Paciente</th>
                            <th><i class="fa fa-id-card"></i> Doc</th>
                            <th><i class="fa fa-droplet"></i> Tipo</th>
                            <th><i class="fa fa-flask"></i> Cantidad</th>
                            <th><i class="fa fa-thermometer"></i> Temp.</th>
                            <th><i class="fa fa-tasks"></i> Proceso</th>
                            <th><i class="fa fa-flag"></i> Estado</th>
                            <th><i class="fa fa-calendar"></i> Fecha</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="tablaADN"></tbody>
                </table>
            </div>
        </div>

        <!-- TABLA ARN COMPLETA -->
        <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 15px rgba(231,76,60,0.1);">
            <h4 style="color: #e74c3c; border-bottom: 2px solid #e74c3c; padding-bottom: 10px; margin-bottom: 15px;"><i class="fa fa-dna"></i> Registros de ARN</h4>
            <div class="table-responsive">
                <table class="table table-sm table-hover" style="margin-top: 15px;">
                    <thead style="background: #e74c3c; color: white; font-size: 12px;">
                        <tr>
                            <th><i class="fa fa-user"></i> Paciente</th>
                            <th><i class="fa fa-id-card"></i> Doc</th>
                            <th><i class="fa fa-flask"></i> Tipo</th>
                            <th><i class="fa fa-flask"></i> Cantidad</th>
                            <th><i class="fa fa-thermometer"></i> Temp.</th>
                            <th><i class="fa fa-tasks"></i> Proceso</th>
                            <th><i class="fa fa-flag"></i> Estado</th>
                            <th><i class="fa fa-calendar"></i> Fecha</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="tablaARN"></tbody>
                </table>
            </div>
        </div>

    </div>
 
<!-- Modal ADN -->
<div class="modal fade" id="modalADN" tabindex="-1" role="dialog" aria-labelledby="modalADNLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header adn">
        <h5 class="modal-title" id="modalADNLabel"><i class="fa fa-flask"></i> Registrar Muestra de ADN</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="color: white;">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="formADN">
          <!-- DATOS PERSONALES -->
          <h6 style="color: #3498db; font-weight: bold; border-bottom: 2px solid #3498db; padding-bottom: 8px; margin-bottom: 15px;"><i class="fa fa-user"></i> DATOS DEL PACIENTE</h6>
          
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label><i class="fa fa-user"></i> Nombre del Paciente</label>
                <input type="text" id="nombreADN" class="form-control" placeholder="Ej: Juan García" required>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label><i class="fa fa-id-card"></i> Documento de Identidad</label>
                <input type="text" id="docADN" class="form-control" placeholder="Ej: 12345678" required>
              </div>
            </div>
          </div>

          <!-- DATOS DE MUESTRA -->
          <h6 style="color: #3498db; font-weight: bold; border-bottom: 2px solid #3498db; padding-bottom: 8px; margin-bottom: 15px;"><i class="fa fa-droplet"></i> DATOS DE LA MUESTRA</h6>
          
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label><i class="fa fa-droplet"></i> Tipo de Muestra</label>
                <select id="tipoADN" class="form-control" required>
                  <option value="">Selecciona un tipo</option>
                  <option value="Sangre">Sangre (tubo EDTA)</option>
                  <option value="Saliva">Saliva (tubo colector)</option>
                  <option value="Cabello">Cabello (con raíz)</option>
                  <option value="Tejido">Tejido (biopsia)</option>
                </select>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label><i class="fa fa-flask"></i> Cantidad de Muestra</label>
                <input type="text" id="cantidadADN" class="form-control" placeholder="Ej: 5 ml, 100 mg" required>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label><i class="fa fa-calendar"></i> Fecha de Recolección</label>
                <input type="date" id="fechaADN" class="form-control" required>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label><i class="fa fa-thermometer"></i> Temperatura Almacenamiento</label>
                <select id="tempADN" class="form-control" required>
                  <option value="">Selecciona temperatura...</option>
                  <option value="-20°C">-20°C (Congelador estándar)</option>
                  <option value="-80°C">-80°C (Ultracongelador)</option>
                  <option value="-196°C">-196°C (Nitrógeno líquido)</option>
                  <option value="4°C">4°C (Refrigerador)</option>
                </select>
              </div>
            </div>
          </div>

          <!-- PROCEDIMIENTO -->
          <h6 style="color: #3498db; font-weight: bold; border-bottom: 2px solid #3498db; padding-bottom: 8px; margin-bottom: 15px;"><i class="fa fa-cogs"></i> PROCEDIMIENTO</h6>
          
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label><i class="fa fa-tasks"></i> Tipo de Proceso</label>
                <select id="procesoADN" class="form-control" required>
                  <option value="">Selecciona proceso</option>
                  <option value="Extracción">Extracción de ADN</option>
                  <option value="Purificación">Purificación</option>
                  <option value="Cuantificación">Cuantificación</option>
                  <option value="PCR">PCR (Amplificación)</option>
                </select>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label><i class="fa fa-flag"></i> Estado del Proceso</label>
                <select id="estadoADN" class="form-control" required>
                  <option value="">Selecciona estado</option>
                  <option value="Pendiente" style="color: #f39c12;">Pendiente</option>
                  <option value="En proceso" style="color: #3498db;">En proceso</option>
                  <option value="Completado" style="color: #27AE60;">Completado</option>
                </select>
              </div>
            </div>
          </div>

          <!-- OBSERVACIONES -->
          <h6 style="color: #3498db; font-weight: bold; border-bottom: 2px solid #3498db; padding-bottom: 8px; margin-bottom: 15px;"><i class="fa fa-comment"></i> OBSERVACIONES</h6>
          
          <div class="form-group">
            <label><i class="fa fa-comment"></i> Notas Adicionales</label>
            <textarea id="obsADN" class="form-control" rows="3" placeholder="Ej: Muestra hemolizada, contaminación observada, etc."></textarea>
          </div>

          <button type="submit" class="btn btn-submit adn" style="margin-top: 20px;"><i class="fa fa-save"></i> Guardar Muestra ADN</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Modal ARN -->
<div class="modal fade" id="modalARN" tabindex="-1" role="dialog" aria-labelledby="modalARNLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header arn">
        <h5 class="modal-title" id="modalARNLabel"><i class="fa fa-dna"></i> Registrar Muestra de ARN</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="color: white;">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="formARN">
          <!-- DATOS PERSONALES -->
          <h6 style="color: #e74c3c; font-weight: bold; border-bottom: 2px solid #e74c3c; padding-bottom: 8px; margin-bottom: 15px;"><i class="fa fa-user"></i> DATOS DEL PACIENTE</h6>
          
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label><i class="fa fa-user"></i> Nombre del Paciente</label>
                <input type="text" id="nombreARN" class="form-control" placeholder="Ej: María López" required>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label><i class="fa fa-id-card"></i> Documento de Identidad</label>
                <input type="text" id="docARN" class="form-control" placeholder="Ej: 87654321" required>
              </div>
            </div>
          </div>

          <!-- DATOS DE MUESTRA -->
          <h6 style="color: #e74c3c; font-weight: bold; border-bottom: 2px solid #e74c3c; padding-bottom: 8px; margin-bottom: 15px;"><i class="fa fa-flask"></i> DATOS DE LA MUESTRA</h6>
          
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label><i class="fa fa-flask"></i> Tipo de Muestra</label>
                <select id="tipoARN" class="form-control" required>
                  <option value="">Selecciona un tipo...</option>
                  <option value="Hisopado nasal">Hisopado nasal (COVID/casos)</option>
                  <option value="Saliva">Saliva (tubo colector)</option>
                  <option value="Tejido">Tejido (órgano/biopsia)</option>
                  <option value="Sangre">Sangre (células nucleadas)</option>
                </select>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label><i class="fa fa-flask"></i> Cantidad de Muestra</label>
                <input type="text" id="cantidadARN" class="form-control" placeholder="Ej: 10 ml, 2 mm³" required>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label><i class="fa fa-calendar"></i> Fecha de Recolección</label>
                <input type="date" id="fechaARN" class="form-control" required>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label><i class="fa fa-thermometer"></i> Temperatura Almacenamiento</label>
                <select id="tempARN" class="form-control" required>
                  <option value="">Selecciona temperatura...</option>
                  <option value="-80°C">-80°C (Ultracongelador URGENTE)</option>
                  <option value="-196°C">-196°C (Nitrógeno líquido)</option>
                  <option value="4°C">4°C (Refrigerador máx 24h)</option>
                </select>
              </div>
            </div>
          </div>

          <!-- PROCEDIMIENTO -->
          <h6 style="color: #e74c3c; font-weight: bold; border-bottom: 2px solid #e74c3c; padding-bottom: 8px; margin-bottom: 15px;"><i class="fa fa-cogs"></i> PROCEDIMIENTO</h6>
          
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label><i class="fa fa-tasks"></i> Tipo de Proceso</label>
                <select id="procesoARN" class="form-control" required>
                  <option value="">Selecciona proceso...</option>
                  <option value="Extracción">Extracción de ARN</option>
                  <option value="Purificación">Purificación</option>
                  <option value="Cuantificación">Cuantificación (Nanodrop)</option>
                  <option value="PCR-RT">PCR-RT (Reversa-Transcripción)</option>
                  <option value="qPCR">qPCR (PCR en tiempo real)</option>
                </select>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label><i class="fa fa-flag"></i> Estado del Proceso</label>
                <select id="estadoARN" class="form-control" required>
                  <option value="">Selecciona estado...</option>
                  <option value="Pendiente" style="color: #f39c12;">Pendiente</option>
                  <option value="En proceso" style="color: #e74c3c;">En proceso</option>
                  <option value="Completado" style="color: #27AE60;">Completado</option>
                </select>
              </div>
            </div>
          </div>

          <!-- OBSERVACIONES -->
          <h6 style="color: #e74c3c; font-weight: bold; border-bottom: 2px solid #e74c3c; padding-bottom: 8px; margin-bottom: 15px;"><i class="fa fa-comment"></i> OBSERVACIONES</h6>
          
          <div class="form-group">
            <label><i class="fa fa-comment"></i> Notas Adicionales</label>
            <textarea id="obsARN" class="form-control" rows="3" placeholder="Ej: Degradación detectada, ciclo Ct bajo, posible contaminación, etc."></textarea>
          </div>

          <button type="submit" class="btn btn-submit arn" style="margin-top: 20px;"><i class="fa fa-save"></i> Guardar Muestra ARN</button>
        </form>
      </div>
    </div>
  </div>
</div>

<script src="js/jquery-3.4.1.min.js"></script>
<script src="js/bootstrap.js"></script>
<script>
$(document).ready(function(){

    // Load from localStorage
    let registrosADN = JSON.parse(localStorage.getItem('registrosADN')) || [];
    let registrosARN = JSON.parse(localStorage.getItem('registrosARN')) || [];

    let editingADN = -1;
    let editingARN = -1;

    function renderADN() {
        $("#tablaADN").empty();
        registrosADN.forEach((reg, i) => {
            // Color del estado
            let colorEstado = reg.estado === 'Completado' ? '#27AE60' : reg.estado === 'En proceso' ? '#3498db' : '#f39c12';
            $("#tablaADN").append(`
                <tr data-index="${i}" style="font-size: 12px;">
                    <td><strong>${reg.nombre}</strong></td>
                    <td>${reg.doc}</td>
                    <td><span class="badge" style="background: #3498db; color: white;">${reg.tipo}</span></td>
                    <td>${reg.cantidad || '-'}</td>
                    <td>${reg.temperatura || '-'}</td>
                    <td>${reg.proceso || '-'}</td>
                    <td><span class="badge" style="background: ${colorEstado}; color: white;">${reg.estado || 'Pendiente'}</span></td>
                    <td>${reg.fecha}</td>
                    <td>
                        <button class="btn btn-warning btn-sm edit-adn" data-index="${i}" title="Editar"><i class="fa fa-edit"></i></button>
                        <button class="btn btn-danger btn-sm delete-adn" data-index="${i}" title="Eliminar"><i class="fa fa-trash"></i></button>
                    </td>
                </tr>
            `);
        });
        $("#contadorADN").text(registrosADN.length);
    }

    function renderARN() {
        $("#tablaARN").empty();
        registrosARN.forEach((reg, i) => {
            // Color del estado
            let colorEstado = reg.estado === 'Completado' ? '#27AE60' : reg.estado === 'En proceso' ? '#e74c3c' : '#f39c12';
            $("#tablaARN").append(`
                <tr data-index="${i}" style="font-size: 12px;">
                    <td><strong>${reg.nombre}</strong></td>
                    <td>${reg.doc}</td>
                    <td><span class="badge" style="background: #e74c3c; color: white;">${reg.tipo}</span></td>
                    <td>${reg.cantidad || '-'}</td>
                    <td>${reg.temperatura || '-'}</td>
                    <td>${reg.proceso || '-'}</td>
                    <td><span class="badge" style="background: ${colorEstado}; color: white;">${reg.estado || 'Pendiente'}</span></td>
                    <td>${reg.fecha}</td>
                    <td>
                        <button class="btn btn-warning btn-sm edit-arn" data-index="${i}" title="Editar"><i class="fa fa-edit"></i></button>
                        <button class="btn btn-danger btn-sm delete-arn" data-index="${i}" title="Eliminar"><i class="fa fa-trash"></i></button>
                    </td>
                </tr>
            `);
        });
        $("#contadorARN").text(registrosARN.length);
    }

    // Initial render
    renderADN();
    renderARN();

    // ADN submit
    $("#formADN").submit(function(e){
        e.preventDefault();

        let nombre = $("#nombreADN").val();
        let doc = $("#docADN").val();
        let tipo = $("#tipoADN").val();
        let cantidad = $("#cantidadADN").val();
        let fecha = $("#fechaADN").val();
        let temperatura = $("#tempADN").val();
        let proceso = $("#procesoADN").val();
        let estado = $("#estadoADN").val();
        let observaciones = $("#obsADN").val();

        let nuevoReg = {nombre, doc, tipo, cantidad, fecha, temperatura, proceso, estado, observaciones};
        if (editingADN >= 0) {
            registrosADN[editingADN] = nuevoReg;
            editingADN = -1;
        } else {
            registrosADN.push(nuevoReg);
        }
        localStorage.setItem('registrosADN', JSON.stringify(registrosADN));

        renderADN();

        $("#formADN")[0].reset();
        $('#modalADN').modal('hide');
    });

    // ARN submit
    $("#formARN").submit(function(e){
        e.preventDefault();

        let nombre = $("#nombreARN").val();
        let doc = $("#docARN").val();
        let tipo = $("#tipoARN").val();
        let cantidad = $("#cantidadARN").val();
        let fecha = $("#fechaARN").val();
        let temperatura = $("#tempARN").val();
        let proceso = $("#procesoARN").val();
        let estado = $("#estadoARN").val();
        let observaciones = $("#obsARN").val();

        let nuevoReg = {nombre, doc, tipo, cantidad, fecha, temperatura, proceso, estado, observaciones};
        if (editingARN >= 0) {
            registrosARN[editingARN] = nuevoReg;
            editingARN = -1;
        } else {
            registrosARN.push(nuevoReg);
        }
        localStorage.setItem('registrosARN', JSON.stringify(registrosARN));

        renderARN();

        $("#formARN")[0].reset();
        $('#modalARN').modal('hide');
    });

    // Edit ADN
    $(document).on('click', '.edit-adn', function() {
        let index = $(this).data('index');
        editingADN = index;
        let reg = registrosADN[index];
        $("#nombreADN").val(reg.nombre);
        $("#docADN").val(reg.doc);
        $("#tipoADN").val(reg.tipo);
        $("#cantidadADN").val(reg.cantidad || '');
        $("#fechaADN").val(reg.fecha);
        $("#tempADN").val(reg.temperatura || '');
        $("#procesoADN").val(reg.proceso || '');
        $("#estadoADN").val(reg.estado || '');
        $("#obsADN").val(reg.observaciones || '');
        $('#modalADN').modal('show');
    });

    // Delete ADN
    $(document).on('click', '.delete-adn', function() {
        let index = $(this).data('index');
        registrosADN.splice(index, 1);
        localStorage.setItem('registrosADN', JSON.stringify(registrosADN));
        renderADN();
    });

    // Edit ARN
    $(document).on('click', '.edit-arn', function() {
        let index = $(this).data('index');
        editingARN = index;
        let reg = registrosARN[index];
        $("#nombreARN").val(reg.nombre);
        $("#docARN").val(reg.doc);
        $("#tipoARN").val(reg.tipo);
        $("#cantidadARN").val(reg.cantidad || '');
        $("#fechaARN").val(reg.fecha);
        $("#tempARN").val(reg.temperatura || '');
        $("#procesoARN").val(reg.proceso || '');
        $("#estadoARN").val(reg.estado || '');
        $("#obsARN").val(reg.observaciones || '');
        $('#modalARN').modal('show');
    });

    // Delete ARN
    $(document).on('click', '.delete-arn', function() {
        let index = $(this).data('index');
        registrosARN.splice(index, 1);
        localStorage.setItem('registrosARN', JSON.stringify(registrosARN));
        renderARN();
    });

});
</script>


</body>

</html>